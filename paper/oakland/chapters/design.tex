\section{System Design}


\newcounter{dsgn}
\renewcommand\yphn[1]{\stepcounter{dsgn} \textcolor{blue} {\thedsgn.} \yphl{#1}}


We design a semantic-aware memory access profiler and
a semantic-aware address sanitizer.

\subsection{Languate Level Semantics}
To parse the semantics of each memory access is critical.

Currently, we define the following semantics: array access or struct access, pointer dereference.

\yphn{Inputs}

We exploit the source code.

\yphn{Outputs}
For a program, both profiler and sanitizer would generate their binaries.


\subsection{Semantic Analysis}
An important task is to collect the semantics of memory access.

\subsection{Memory object organization}
Do we need to use variable size red-zones for different kinds of objects?

\subsubsection{Heap Buffers}

\subsubsection{Stack buffers}

\subsubsection{Internal buffers}
An object sometimes contains a buffer inside itself.
This buffer may be security-sensitive if its adjacent members are function pointers.

For such an object, we create red-zones to surround the buffers, similar to what Asan does on stack buffers.

\subsection{Instrumentation}

Do we need to do another check after a loop?

\subsection{Exception Handling}


\begin{minted}[fontsize=\scriptsize,frame=single,linenos,numbersep=-6pt]{llvm}
  entry:
    %p.addr = alloca i8*, align 8
    store i8* %p, i8** %p.addr, align 8
    br label %while.cond  
  while.cond:
    %0 = load i8*, i8** %p.addr, align 8
    %1 = load i8, i8* %0, align 1
    %tobool = icmp ne i8 %1, 0
    br i1 %tobool, label %while.body, label %while.end
  while.body:    
    %2 = load i8*, i8** %p.addr, align 8
    %3 = load i8, i8* %2, align 1
    %conv = sext i8 %3 to i32
    %4 = load i32, i32* @globalx, align 4
    %add = add nsw i32 %4, %conv
    store i32 %add, i32* @globalx, align 4
    %5 = load i8*, i8** %p.addr, align 8
    %incdec.ptr = getelementptr inbounds i8, i8* %5, i32 1
    store i8* %incdec.ptr, i8** %p.addr, align 8
    br label %while.cond  
  while.end:
    ret void
\end{minted}

A sound algorithm.

Symbolic address-set Analsysis based on Symbolic IR execution.

This is really an old problem.



\subsection{Symbolic IR Execution Engine}

\subsection{Symbolic Address-set Analysis}

\subsection{Instrumentation}

\subsection{Data Layout}



